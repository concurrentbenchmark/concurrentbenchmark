\documentclass[aspectratio=169,hyperref={pdfpagelabels=false}]{beamer}
\input{preamble.tex}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage{natbib}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{mathpartir}
\usepackage{bm}
\usepackage{hyperref}
\usepackage{cleveref}

\title[Concurrent Calculi Formalisation Benchmark]{\texorpdfstring{Concurrent Calculi\\Formalisation Benchmark}{Concurrent Calculi Formalisation Benchmark}}
\author{Marco Carbone
\and David Castro-Perez
\and Francisco Ferreira
\and \texorpdfstring{\underline{Lorenzo Gheri}}{Lorenzo Gheri}
\and Frederik Krogsdal Jacobsen
\and Alberto Momigliano
\and Luca Padovani
\and Alceste Scalas
\and Dawit Tirore
\and Martin Vassor
\and Nobuko Yoshida
\and Daniel Zackon}
\date{October 22, 2023}

\setevent{30 Years of Session Types}
\setcolor{dtured}

\makeatletter
\def\beamer@andtitle{\unskip, }
\makeatother

\input{../macros.tex}

\begin{document}
\inserttitlepage

\begin{frame}{Introduction}
  \begin{itemize}
  \item Why this challenge? We want to formalise session types, but that's a big challenge... we isolate smaller parts
  \item Why mechanized proofs?
    \begin{itemize}
    \item Certified code generation
    \item No mistakes in overlooked cases
    \item New insights
    \end{itemize}
  \item Basic concurrency + session types
  \item Why these challenges and not other stuff?
  \item Why is this related to session types (why is session types not the main thing?)
  \end{itemize}
\end{frame}

\begin{frame}{Linearity and behavioural type systems}
  %Handling contexts linearly + small example
  Processes:
  \begin{footnotesize}
\[
\begin{array}{rcl}
  v,w & ::= & a \quad\mid\quad l \\
  P,Q & ::=& \Pend \quad\mid\quad \Pout{x}{v}{P} \quad\mid\quad \Pin{x}{l}{P} \quad\mid\quad \PBpar{P}{Q} \quad\mid\quad  \Presd{x}{y}{P}
  \end{array}
\]
  \end{footnotesize}
  
  Semantics:
  \begin{footnotesize}
  \begin{mathpar}
  \inferrule[R-Com]{ }{\reduces{\Presd{x}{y}{(\Ppar{\Pout{x}{a}{P}}{\Ppar{\Pin{y}{l}{Q}}{R}})}}{\Presd{x}{y}{(\Ppar{P}{\Ppar{\subst{Q}{a}{l}}{R}})}}}
  \and
  \inferrule[R-Res]{\reduces{P}{Q}}{\reduces{\Presd{x}{y}{P}}{\Presd{x}{y}{Q}}}
  \and
  \inferrule[R-Par]{\reduces{P}{Q}}{\reduces{\Ppar{P}{R}}{\Ppar{Q}{R}}}
  \and
  \inferrule[R-Struct]{\scong{P}{P'} \\ \reduces{P'}{Q'} \\ \scong{Q}{Q'}}{\reduces{P}{Q}}
  \end{mathpar}
  \end{footnotesize}


\end{frame}

\begin{frame}{Linearity and behavioural type systems}
  %Handling contexts linearly + small example

  %Desiderata:
\begin{enumerate}
\item No endpoint is used simultaneously by parallel processes. %;
\item The two endpoints of the same session have dual types.
\end{enumerate}
\ \\ \ \\
\visible<2->{
  Types:
  \begin{footnotesize}
\[
\begin{array}{rcl}
    S,T & ::= & \Tend \quad\mid\quad \Tbase \quad\mid\quad \Tin{S} \quad\mid\quad \Tout{S} \\
    \Gamma &::= & \Cempty \quad\mid\quad \Gamma, l \qquad\quad
    \begin{array}{rcl}
      \Delta &::= & \Cempty \quad\mid\quad \Cadd{\Delta}{\hastype{x}{S}}
    \end{array}
\end{array}
\]
  \end{footnotesize}
  
  Typing rules:
  \begin{footnotesize}
\begin{mathpar}

  \inferrule[T-Inact]{\tend\Delta }{\types{\Gamma;\Delta}{\Pend}}
  \and
  \inferrule[T-Par]{\types{\Gamma;\Delta_1}{P} \\ \types{\Gamma;\Delta_2}{Q}}
  {\types{\Gamma; \Csplit{\Delta_1}{\Delta_2}}{\Ppar{P}{Q}}}
  \and
  \inferrule[T-Res]{\types{\Gamma; (\Cadd{\Cadd{\Delta}{\hastype{x}{T}}}{\hastype{y}{\dual{T}}}}{P})}{\types{\Gamma}{\Presd{x}{y}{P}}}
  \and
    \inferrule[T-Out]{
      \typev{\Gamma}{\hastype{v}{\Tbase}} \\ \types{\Gamma; \Cupdate{\Delta}{\hastype{x}{T}}}{P}}{\types{\Gamma; (\Csplit{\Delta}{\hastype{x}{\Tout{T}}})}{\Pout{x}{v}{P}}}
    \and
    \inferrule[T-IN]{
      \types{(\Gamma,  l ); (\Cupdate{\Delta}{\hastype{x}{T}})}{P}}{\types{\Gamma; (\Csplit{\Delta}{\hastype{x}{\Tin{T}}})}{\Pin{x}{l}{P}}}
\end{mathpar}
\end{footnotesize}

}
  
\end{frame}

\begin{frame}{Linearity and behavioural type systems}
  %Handling contexts linearly + small example
  Challenge!
  
  \begin{theorem}[Subject reduction]
  If \( \types{\Gamma;\Delta}{P} \) and \( \reduces{P}{Q} \) then \( \types{\Gamma;\Delta}{Q} \).
  \end{theorem}

  \begin{theorem}[Type safety]
  If \( \types{\Cempty}{P} \), then \( P \) is well formed.
  \end{theorem}
  
\end{frame}




\begin{frame}{Name passing and scope extrusion}
  %Handling opening and closing of restrictions + small example

  \[P,Q := \Pend\quad|\quad \Ppar{P}{Q}\quad|\quad\Pout{x}{y}{P}\quad|\quad\Pin{x}{y}{P}\quad|\quad \Pres{x}{P}\]

  \ \\

  \visible<2->{
    One relevant example:
    \[\Ppar{(\Pres{y}{\Pout{x}{y}{P}})}{(\Pin{x}{z}{Q})}\]
  }
  
      
\end{frame}

\begin{frame}{Name passing and scope extrusion 1: structural congruence}
  %Handling opening and closing of restrictions + small example

  First approach:\ \\

  \[
  \begin{array}{ll}
    \Ppar{(\Pres{y}{\Pout{x}{y}{P}})}{(\Pin{x}{z}{Q})} & \visible<2->{\equiv}\\
    \visible<2->{\Pres{y}{ (\Ppar{\Pout{x}{y}{P}}{\Pin{x}{z}{Q}})}} & \visible<3->{\rightarrow}\\
    \visible<3->{\Pres{y}{(\Ppar{P}{\subst{Q}{y}{z}})}} & \visible<4->{\dots}
  \end{array}
  \]
  \ \\ \ \\

  \visible<2->{
    \alt<3->
        {
          \[
          \begin{array}{lll}
            \inferrule[R-Com]{ }{\reduces{\Ppar{\Pout{x}{y}{P}}{\Pin{x}{z}{Q}}}{\Ppar{P}{\subst{Q}{y}{z}}}}
            & \text{ and } &
            \inferrule[R-Res]{\reduces{P}{Q}}{\reduces{\Pres{x}{P}}{\Pres{x}{Q}}}
          \end{array}
          \]
        }
        {
          \[
          \inferrule[Sc-Res-Par]{x \notin \freenames{Q}}{\scong{\Ppar{\Pres{x}{P}}{Q}}{\Pres{x}{(\Ppar{P}{Q})}}}
          \]
        }
  }  
      
\end{frame}

\definecolor{myred}{RGB}{255,160,160}
\definecolor{mygreen}{RGB}{156,255,186}
\newcommand{\hg}[1]{\colorbox{mygreen}{$\displaystyle #1$}}
\newcommand{\hr}[1]{\colorbox{myred}{$\displaystyle #1$}}

\begin{frame}{Name passing and scope extrusion 2: labelled transition system}
  %Handling opening and closing of restrictions + small example

  Second approach:\ \\

  \[
  \begin{array}{llll}
    \Ppar{(\Pres{y}{\Pout{x}{y}{P}})}{(\Pin{x}{z}{Q})} & \visible<2->{\xrightarrow{\tau}} &
    \visible<2->{\Pres{y}{(\Ppar{P}{\subst{Q}{y}{z}})}} & \visible<6->{\dots}
  \end{array}
  \]
  \ \\ \ \\
\begin{footnotesize}
  \visible<2->{
    \[
    \begin{array}{l}
      \inferrule{
        \inferrule{\transition{\Pout{x}{y}{P}}{\Aoutf{x}{y}}{P}\\x\neq y}{\transition{\Pres{y}{\Pout{x}{y}{P}}}{\Aoutb{x}{y}}{P}} \\
        \transition{\Pin{x}{z}{Q}}{\Ain{x}{y}}{\subst{Q}{y}{z}} \\
        z \notin \freenames{Q}
  }{
        \alt<3->
            {\transition{\Ppar{(\Pres{y}{\Pout{x}{y}{P}})}{(\Pin{x}{z}{Q})}}{\tau}{\Pres{y}{(\Ppar{P}{\subst{Q}{y}{z}})}}}
            {\hr{\transition{\Ppar{(\Pres{y}{\Pout{x}{y}{P}})}{(\Pin{x}{z}{Q})}}{\tau}{\Pres{y}{(\Ppar{P}{\subst{Q}{y}{z}})}}}}
  }
        
      \\ \ \\
      \visible<3->{
      \alt<4->
          {
            \alt<5->
                {
                  \begin{array}{lll}
                    \inferrule[Out]{ }{\transition{\Pout{x}{y}{P}}{\Aoutf{x}{y}}{P}}
                    & \text{ and } &
                    \inferrule[In]{ }{\transition{\Pin{x}{z}{P}}{\Ain{x}{y}}{\subst{P}{y}{z}}}
                  \end{array}
                }
                {
                  \inferrule[Open]{\transition{P}{\Aoutf{x}{z}}{P'} \\ z \neq x}{\transition{\Pres{z}{P}}{\Aoutb{x}{z}}{P'}}
                } 
          }
          {
          \inferrule[Close-L]{\transition{P}{\Aoutb{x}{z}}{P'} \\ \transition{Q}{\Ain{x}{z}}{Q'} \\ z \notin \freenames{Q}}{\transition{\Ppar{P}{Q}}{\tau}{\Pres{z}{\Ppar{P'}{Q'}}}}
          }
          }
    \end{array}
    \]
  }  
\end{footnotesize}      
\end{frame}


\begin{frame}{Coinduction and infinite processes}
  Up-to techniques + small example
\end{frame}

\begin{frame}{What's the point?}
  \begin{itemize}
  \item Showing off cool proof assistant features
  \item Tutorial formalizations showcasing various approaches
  \item Discovering the limits of current proof assistants and suggesting new features
  \item Comparing approaches, and maybe developing new techniques
  \item Establishing best practices which work across different ``flavours'' of session types
  \end{itemize}
\end{frame}

\begin{frame}{How to join}
  \begin{itemize}
  \item Website
  \item Mailing list
  \item Technical report
  \item Active formalisation efforts
  \end{itemize}
\end{frame}

\end{document}
