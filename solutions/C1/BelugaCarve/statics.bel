%======================================================%
% Statics of the session-typed calculus
%======================================================%

%------------------------------------------------------%
% Typing rules for processes
%------------------------------------------------------%

LF oft : lctx _ â†’ proc â†’ type =

| oft/null : exh Î” â†’ oft Î” null

| oft/wait : upd Î” _ X X end? end? ğŸ™ ğŸ˜ Î”' â†’ oft Î”' P
        â†’ oft Î” (wait X P)

| oft/close : upd Î” _ X X end! end! ğŸ™ ğŸ˜ Î”' â†’ oft Î”' P
        â†’ oft Î” (close X P)

| oft/inp : upd Î” _ X X (recv T U) U ğŸ™ ğŸ™ Î”'
        â†’ ({y:obj} oft (cons Î”' y T ğŸ™) (P y))
        â†’ oft Î” (inp X P)

| oft/out : upd Î” _ Y Y T T ğŸ™ ğŸ˜ Î”' â†’ upd Î”' _ X X (send T U) U ğŸ™ ğŸ™ Î”''
        â†’ oft Î”'' P
        â†’ oft Î” (out X Y P)

| oft/par : oft Î”â‚ P â†’ oft Î”â‚‚ Q â†’ merge Î”â‚ Î”â‚‚ Î” â†’ oft Î” (par P Q)

| oft/res : dual T T'
        â†’ ({x:obj} {y:obj} oft (cons (cons Î” x T ğŸ™) y T' ğŸ™) (P x y))
        â†’ oft Î” (res P)
;